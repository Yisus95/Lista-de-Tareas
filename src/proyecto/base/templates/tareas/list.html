{% extends 'base/principal.html' %}
{% block content %}

<div class="barra-superior">
  <div>
    <h1>Hola {{ request.user|title }}</h1>
    <h3 style="margin:0">Tienes <i>{{ count }}</i> tarea{{ count|pluralize }} incompleta{{ count|pluralize }}</h3>
  </div>
  {% if request.user.is_authenticated %}
    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" style="background:none;border:none;padding:0;color:#fff;cursor:pointer;font-family:'Red Hat Display', sans-serif;font-size:15px;">
        Cerrar sesión
      </button>
    </form>
  {% else %}
    <a href="{% url 'login' %}">Iniciar sesión</a>
  {% endif %}
</div>

<div id="envoltorio-agregar-buscar">
  <section class="seccion2">
    <form method="GET" action="">
      <input type="text" name="buscar" placeholder="Buscar tarea" value="{{ request.GET.buscar }}">
      <input class="boton" type="submit" value="Buscar">
    </form>
    <a id="enlace-agregar" href="{% url 'crear-tarea' %}">&#xFF0B;</a>
  </section>
</div>

<div class="envoltorio-items-tarea">
  {% for tarea in tareas %}
    <div class="envoltorio-tarea {% if tarea.completo %}completada{% endif %}">
      <span class="titulo-tarea">
        {% if tarea.completo %}
          <div class="icono-tarea-completa" aria-label="Tarea completada"></div>
          <s><a href="{% url 'editar-tarea' tarea.id %}">{{ tarea.titulo }}</a></s>
        {% else %}
          <div class="icono-tarea-incompleta" aria-label="Tarea pendiente"></div>
          <a href="{% url 'editar-tarea' tarea.id %}">{{ tarea.titulo }}</a>
        {% endif %}
      </span>
      <a class="enlace-eliminar" href="{% url 'eliminar-tarea' tarea.id %}" aria-label="Eliminar tarea">×</a>
    </div>
  {% empty %}
    <h3>No hay tareas pendientes.</h3>
  {% endfor %}
</div>

{% endblock %}

